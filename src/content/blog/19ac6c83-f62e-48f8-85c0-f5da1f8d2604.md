Title: "CentOS. Upgrade zabbix с версии 1.8 до 2.0"
Date: 2014-09-07 19:45:05 +0600
Category: linux
Authors: A. Semenov
Tags: linux, centos, zabbix

В репозиториях [CentOS][] появился [Zabbix][] версии 2.0, просто праздник какой-то, но нет худа без добра. Изменения в новой версии затронули базу данных во всех интересных местах и просто обновиться недостаточно, также нам нужно будет пропатчить базу в соответствии с нововведениями. 

<!--more-->

Вся процедура обновления выполняется в соответствии с официальной документацией, только в качестве бинарного пакета мы используем zabbix20-* из репозитория. Патч мы тоже не будем накладывать вручную, для этого, на наше счастье, разработчики Zabbix или майтайнеры CentOS побеспокоились об этом, подготовив патч SQL и небольшой скрипт для накатывания всего этого добра. Итак переходим и выполняем:

    cd /usr/share/zabbix-mysql/upgrades/2.0
    bash upgrade -uroot -p<password> [ -h<host> ] <database name>

Стоит обратить внимание, что в случае, если БД сервера расположена нелокально и дефолтный безпарольный доступ прикрыт, то обязательно нужно указать доступы как параметры скрипту.

Собственно, вот и все отличия, дальше следуем описанию в документации.

[CentOS]: http://www.centos.org/
[Zabbix]: http://www.zabbix.com/ru/

